/* ID CARD SECTION */
#id-card-section{
    display:flex; justify-content:center; align-items:center;
    min-height: 55vh; /* was 80vh â€“ tighter */
    perspective: 1200px;
    margin-top: -10px; /* pull it up slightly */
}

.id-card{
    margin-top: -40px;   /* was -80px */
    width: 300px; height: 400px;
    border-radius: 20px;
    box-shadow: 10px 10px 20px rgba(0,0,0,0.5);
    text-align:center;
    transform-style: preserve-3d;
    transition: transform 0.2s ease-out;
    animation: float 3s ease-in-out infinite alternate;
    --accent-hue: 160;
}

/* disable selection */
.id-card, .id-card *{ user-select:none; -webkit-user-select:none; -moz-user-select:none; -ms-user-select:none; }

.card-inner{ position:relative; width:100%; height:100%; transform-style: preserve-3d; transition: transform 0.1s; }

.card-front, .card-back{
    position:absolute; inset:0; width:100%; height:100%;
    background: url('./assets/CardImages/card-texture.png') no-repeat center/cover;
    border-radius:20px; backface-visibility:hidden; transform-style:preserve-3d;
    display:flex; flex-direction:column; justify-content:center; align-items:center;
    box-shadow: 5px 5px 15px rgba(255,255,255,0.2);
}

.character-container{ position:relative; width:100%; transform-style:preserve-3d; margin-bottom: 8px; }

/* Inner backdrop behind the tree, above the card texture */
.scene-backdrop{
  position:absolute;
  inset: 18px 18px 56px 18px;   /* leave space for title at bottom */
  border-radius: 18px;
  background:
    radial-gradient(120% 120% at 30% 20%, rgba(255,255,255,0.05), transparent 60%),
    linear-gradient(180deg, rgba(22,24,28,0.92), rgba(18,19,23,0.96));
  box-shadow:
    0 14px 34px rgba(0,0,0,0.45),
    inset 0 0 0 8px rgba(255,255,255,0.10),
    inset 0 22px 44px rgba(255,255,255,0.08),
    inset 0 1px 0 rgba(255,255,255,0.06),
    inset 0 -1px 0 rgba(0,0,0,0.35);
  z-index: 1;                   /* below .character-layer (z:2), above card texture */
  transform: translateZ(10px);
}

/* Lock card visuals across themes */
body.theme-cozy-light .scene-backdrop,
body.theme-cozy-dark .scene-backdrop {
  background:
    radial-gradient(60% 120% at 50% 35%, rgba(255,255,255,0.08), rgba(255,255,255,0) 60%),
    linear-gradient(180deg, rgba(12,12,20,0.92), rgba(12,12,20,0.96));
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.06),
    inset 0 -1px 0 rgba(0,0,0,0.40),
    0 18px 36px rgba(8,8,16,0.55);
}

/* Holo foil ring (big card) */
.id-card .card-front::after{
  content:""; position:absolute; inset:14px; border-radius:22px;
  padding:2px; z-index:3; pointer-events:none;
  background:
    conic-gradient(from var(--spin,0deg) at 50% 50%,
      hsl(var(--accent-hue) 85% 62% / .85),
      hsl(calc(var(--accent-hue)+120) 85% 62% / .85),
      hsl(calc(var(--accent-hue)+240) 85% 62% / .85),
      hsl(var(--accent-hue) 85% 62% / .85));
  -webkit-mask: 
     linear-gradient(#000 0 0) content-box, 
     linear-gradient(#000 0 0);
  -webkit-mask-composite: xor; mask-composite: exclude;
  box-shadow: inset 0 0 24px rgba(255,255,255,.15);
  animation: holoSpin 10s linear infinite;
  opacity:.9;
}

@keyframes holoSpin { to { --spin:360deg; } }

@media (prefers-reduced-motion: reduce){
  .id-card .card-front::after{ animation:none; }
  .scene-backdrop::after{ animation:none; }
}

/* Subtle seeded sparkles behind the tree */
.scene-backdrop::after{
  content:""; position:absolute; inset:10px; border-radius:18px; z-index:1;
  background:
    radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,.10), transparent 60%),
    radial-gradient(1.5px 1.5px at 70% 55%, rgba(255,255,255,.08), transparent 60%),
    radial-gradient(1.8px 1.8px at 40% 75%, rgba(255,255,255,.06), transparent 60%);
  filter: blur(.2px) brightness(1.05);
  animation: sparkFloat 8s ease-in-out infinite alternate;
  opacity:.7;
}

@keyframes sparkFloat { 0%{transform:translateY(0)} 100%{transform:translateY(-6px)} }

.card-back{ transform: rotateY(180deg); }
.id-card.flipped .card-inner{ transform: rotateY(180deg); animation: float 20s ease-in-out infinite; }

.character-layer{ position:relative; z-index:2; transform: translateZ(15px); backface-visibility:hidden; display:grid; place-items:center; }
.pixel-avatar{ max-width: 84%; max-height: 78%; width:auto; height:auto; object-fit:contain; image-rendering:pixelated; border-radius:10px; box-shadow: none; }

.front-letters{ position:relative; z-index:2; transform: translateZ(20px); backface-visibility:hidden; }

.front-layer{ position:absolute; inset:0; z-index:2; transform: translateZ(25px); backface-visibility:hidden; }
.front-layer1{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; }

.info{ width:100%; text-align:center; z-index:1; }

.back-letters{ position:relative; z-index:2; transform: translateZ(20px); backface-visibility:hidden; }
.card-back{ position:relative; }
.back-layer{ position:absolute; inset:0; z-index:2; transform: translateZ(10px); backface-visibility:hidden; }
.back-layer1{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; }

@keyframes float{
    0% { transform: translateY(1px) rotateY(10deg) rotateX(0deg); }
    50%{ transform: translateY(-8px) rotateY(10deg) rotateX(1deg); }
    100%{ transform: translateY(1px) rotateY(2deg) rotateX(0deg); }
}

@keyframes floatStraight {
  0%{transform:translateY(1px)}
  50%{transform:translateY(-8px)}
  100%{transform:translateY(1px)}
}

/* rotate hint */
.rotate-hint{
    position:absolute; top:10px; left:50%; transform:translateX(-50%);
    text-align:center; font-size:13px; color:rgba(255,255,255,0.9);
    opacity:0; animation: hintFadeInOut 6s ease-in-out infinite; pointer-events:none;
}
.rotate-hint .arrow{ display:block; font-size:22px; margin-bottom:3px; animation: arrowBounce 2s ease-in-out infinite; }
@keyframes hintFadeInOut{ 0%,20%,80%,100%{opacity:0;} 40%,60%{opacity:1;} }
@keyframes arrowBounce{ 0%{transform:translateY(0);} 50%{transform:translateY(-5px);} 100%{transform:translateY(0);} }

@keyframes mintPopSpin {
  0%   { transform: translateY(12px) scale(0.86) rotateY(-180deg); opacity: 0; }
  60%  { transform: translateY(-4px) scale(1.04) rotateY(20deg);   opacity: 1; }
  100% { transform: translateY(0) scale(1) rotateY(0deg); }
}
#mint-overlay .id-card { margin: 8px auto; width: 300px; height: 400px; animation:none; }
#mint-overlay .id-card.mint-appear {
  animation: mintPopSpin 700ms cubic-bezier(.2,.8,.2,1) both,
             floatStraight 6s ease-in-out 700ms infinite alternate;
}
